<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Ù†Ø¸Ø§Ù… Ø§Ù„Ø´ÙƒØ§ÙˆÙ‰ Ø§Ù„Ù…ÙˆØ­Ø¯</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary-color: #1a5fb4;
            --secondary-color: #2d8fd5;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --border-radius: 20px;
            --box-shadow: 0 15px 40px rgba(0, 0, 0, 0.12);
            --transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Cairo', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: 20px;
            position: relative;
        }

        /* Ø®Ù„ÙÙŠØ© Ù…ØªØ­Ø±ÙƒØ© */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3), transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(138, 43, 226, 0.3), transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(75, 0, 130, 0.2), transparent 50%);
            animation: gradientShift 15s ease infinite;
            z-index: -1;
        }

        @keyframes gradientShift {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(5deg); }
        }

        /* Ø¬Ø²ÙŠØ¦Ø§Øª Ù…ØªØ­Ø±ÙƒØ© */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 50%;
            animation: float 20s infinite;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0) translateX(0) rotate(0deg);
                opacity: 0;
            }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% {
                transform: translateY(-100vh) translateX(100px) rotate(360deg);
                opacity: 0;
            }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px;
            width: 100%;
            position: relative;
            z-index: 1;
        }

        /* Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© */
        header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            color: white;
            padding: 30px 0;
            text-align: center;
            border-radius: 0 0 30px 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 200%;
            height: 5px;
            background: linear-gradient(90deg,
                transparent,
                rgba(255, 255, 255, 0.8),
                transparent
            );
            animation: headerShine 3s infinite;
        }

        @keyframes headerShine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .logo {
            font-size: 2rem;
            margin-bottom: 10px;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            padding: 0 10px;
            line-height: 1.4;
            font-weight: 800;
            animation: fadeInDown 0.8s ease;
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.95;
            max-width: 600px;
            margin: 0 auto;
            padding: 0 10px;
            line-height: 1.6;
            animation: fadeInUp 0.8s ease 0.2s both;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        .main-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: calc(100vh - 250px);
            padding: 20px;
            animation: fadeIn 0.6s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .welcome-text {
            text-align: center;
            margin-bottom: 40px;
            max-width: 800px;
            animation: scaleIn 0.6s ease 0.3s both;
        }

        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .welcome-text h2 {
            color: white;
            font-size: 2rem;
            margin-bottom: 20px;
            font-weight: 800;
            text-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .welcome-text p {
            color: rgba(255, 255, 255, 0.95);
            font-size: 1.2rem;
            line-height: 1.9;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        /* Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª Ø«Ù„Ø§Ø«ÙŠØ© Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ */
        .boxes-container {
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
            margin-bottom: 40px;
            width: 100%;
            perspective: 1500px;
        }

        .box-wrapper {
            width: 100%;
            max-width: 450px;
            height: 400px;
            margin: 0 auto;
            animation: floatIn 0.8s ease both;
        }

        .box-wrapper:nth-child(1) { animation-delay: 0.4s; }
        .box-wrapper:nth-child(2) { animation-delay: 0.6s; }

        @keyframes floatIn {
            from { opacity: 0; transform: translateY(50px) rotateX(-15deg); }
            to { opacity: 1; transform: translateY(0) rotateX(0); }
        }

        .action-box {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: var(--transition);
            cursor: pointer;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            touch-action: manipulation;
            animation: pulse 3s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 15px 40px rgba(0, 0, 0, 0.12); }
            50% { box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2); }
        }

        .action-box:hover {
            transform: translateY(-15px) rotateX(5deg) rotateY(5deg);
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.25);
        }

        .action-box:active { transform: scale(0.97); }

        .box-content {
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
            text-align: center;
            border: 2px solid rgba(255, 255, 255, 0.5);
            position: relative;
            overflow: hidden;
        }

        .box-content::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                45deg,
                transparent,
                rgba(255, 255, 255, 0.1),
                transparent
            );
            transform: rotate(45deg);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .box-icon {
            font-size: 5rem;
            margin-bottom: 25px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: iconBounce 2s infinite;
            position: relative;
            z-index: 1;
        }

        @keyframes iconBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .box-title {
            font-size: 1.8rem;
            font-weight: 800;
            margin-bottom: 20px;
            color: var(--dark-color);
            position: relative;
            z-index: 1;
        }

        .box-description {
            font-size: 1.1rem;
            line-height: 1.7;
            color: #555;
            margin-bottom: 30px;
            position: relative;
            z-index: 1;
        }

        .box-button {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 8px 25px rgba(26, 95, 180, 0.4);
            display: flex;
            align-items: center;
            gap: 12px;
            width: 100%;
            max-width: 280px;
            justify-content: center;
            touch-action: manipulation;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .box-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .box-button:hover::before {
            width: 300px;
            height: 300px;
        }

        .box-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(26, 95, 180, 0.5);
        }

        .box-button:active { transform: translateY(1px); }

        .box-button span,
        .box-button i {
            position: relative;
            z-index: 1;
        }

        @keyframes arrowSlide {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(-5px); }
        }

        .box-button i {
            animation: arrowSlide 1.5s infinite;
        }

        /* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ù…Ø®ÙÙŠØ© */
        .hidden-section {
            display: none;
            width: 100%;
            animation: slideIn 0.6s ease forwards;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .form-section,
        .search-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 35px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            margin-bottom: 30px;
            border: 2px solid rgba(255, 255, 255, 0.5);
            position: relative;
            overflow: hidden;
        }

        .form-section::before,
        .search-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color), var(--primary-color));
            background-size: 200% 100%;
            animation: gradientMove 3s infinite;
        }

        @keyframes gradientMove {
            0% { background-position: 0% 0%; }
            100% { background-position: 200% 0%; }
        }

        .form-section h2,
        .search-section h2 {
            margin-bottom: 30px;
            color: var(--dark-color);
            font-size: 1.8rem;
            text-align: center;
            font-weight: 800;
        }

        .form-group {
            margin-bottom: 25px;
            animation: fadeInUp 0.5s ease both;
        }

        .form-group:nth-child(1) { animation-delay: 0.1s; }
        .form-group:nth-child(2) { animation-delay: 0.2s; }
        .form-group:nth-child(3) { animation-delay: 0.3s; }
        .form-group:nth-child(4) { animation-delay: 0.4s; }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 700;
            color: var(--dark-color);
            font-size: 1.05rem;
        }

        input,
        select,
        textarea {
            width: 100%;
            padding: 18px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            font-size: 16px;
            transition: var(--transition);
            background: white;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }

        input:focus,
        select:focus,
        textarea:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 4px rgba(26, 95, 180, 0.1);
            background: white;
            transform: translateY(-2px);
        }

        textarea {
            min-height: 180px;
            resize: vertical;
        }

        .char-count {
            text-align: left;
            font-size: 14px;
            color: #666;
            margin-top: 8px;
            font-weight: 600;
        }

        .required::after {
            content: " *";
            color: var(--danger-color);
        }

        .form-row {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 25px;
        }

        @media (min-width: 768px) {
            .form-row { flex-direction: row; }
        }

        .form-col {
            flex: 1;
            width: 100%;
        }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
        .btn {
            padding: 18px 35px;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            width: 100%;
            margin-top: 15px;
            touch-action: manipulation;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 400px;
            height: 400px;
        }

        .btn span,
        .btn i {
            position: relative;
            z-index: 1;
        }

        .btn:active { transform: scale(0.98); }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            box-shadow: 0 10px 30px rgba(26, 95, 180, 0.4);
        }

        .btn-primary:hover {
            box-shadow: 0 15px 40px rgba(26, 95, 180, 0.5);
            transform: translateY(-3px);
        }

        .btn-search {
            background: linear-gradient(135deg, #3498db, #2d8fd5);
            color: white;
            box-shadow: 0 10px 30px rgba(52, 152, 219, 0.4);
        }

        .btn-search:hover {
            box-shadow: 0 15px 40px rgba(52, 152, 219, 0.5);
            transform: translateY(-3px);
        }

        .back-button {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            color: white;
            border: none;
            padding: 16px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 12px;
            width: 100%;
            max-width: 350px;
            margin: 0 auto 25px;
            justify-content: center;
            touch-action: manipulation;
            box-shadow: 0 8px 25px rgba(108, 117, 125, 0.3);
        }

        .back-button:hover {
            background: linear-gradient(135deg, #5a6268, #495057);
            transform: translateX(-5px);
            box-shadow: 0 10px 30px rgba(108, 117, 125, 0.4);
        }

        .back-button:active { transform: translateX(-3px) scale(0.98); }

        /* Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ */
        .message {
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.1rem;
            line-height: 1.7;
            font-weight: 600;
            animation: slideIn 0.5s ease;
        }

        .success {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            color: #155724;
            border: 2px solid #28a745;
            box-shadow: 0 10px 30px rgba(40, 167, 69, 0.2);
        }

        .error {
            background: linear-gradient(135deg, #f8d7da, #f5c6cb);
            color: #721c24;
            border: 2px solid #dc3545;
            box-shadow: 0 10px 30px rgba(220, 53, 69, 0.2);
        }

        /* Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª */
        .documents-option {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border: 2px solid #dee2e6;
            border-radius: 15px;
            padding: 25px;
            margin-top: 25px;
        }

        .documents-checkbox {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .documents-checkbox input {
            width: 28px;
            height: 28px;
        }

        .documents-instructions {
            background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
            border-right: 5px solid #4caf50;
            padding: 20px;
            border-radius: 12px;
            font-size: 1rem;
            margin-top: 20px;
            display: none;
            animation: slideIn 0.5s ease;
        }

        .documents-instructions.show { display: block; }

        /* Ø§Ù„ØªØ°ÙŠÙŠÙ„ */
        .footer {
            text-align: center;
            padding: 30px 20px;
            color: white;
            font-size: 1rem;
            margin-top: 40px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .footer p {
            margin: 8px 0;
            line-height: 1.8;
        }

        .footer a {
            color: white;
            text-decoration: none;
            font-weight: 700;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .footer a:hover {
            color: #ffd700;
            transform: translateY(-2px);
        }

        .footer i { font-size: 1.2rem; }

        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù…ÙˆØ¨Ø§ÙŠÙ„ */
        @media (max-width: 767px) {
            html { font-size: 14px; }
            .logo { font-size: 1.6rem; }
            .subtitle { font-size: 1rem; }
            .welcome-text h2 { font-size: 1.6rem; }
            .box-wrapper { height: 380px; }
            .box-icon { font-size: 4rem; }
            .form-section,
            .search-section { padding: 25px; }
        }

        @media (max-width: 480px) {
            .logo { font-size: 1.4rem; }
            .box-wrapper { height: 360px; }
            .box-icon { font-size: 3.5rem; }
        }

        /* Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø© */
        @media (min-width: 1200px) {
            .boxes-container { gap: 50px; }
            .box-wrapper { max-width: 480px; height: 420px; }
        }

        /* Ù…Ø³Ø§Ø­Ø© Ø¢Ù…Ù†Ø© */
        @supports (padding: max(0px)) {
            body,
            header,
            .container {
                padding-left: max(15px, env(safe-area-inset-left));
                padding-right: max(15px, env(safe-area-inset-right));
            }
            body { padding-bottom: max(20px, env(safe-area-inset-bottom)); }
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>

    <header>
        <div class="container">
            <h1 class="logo">âš–ï¸ Ù†Ø¸Ø§Ù… Ø§Ù„Ø´ÙƒØ§ÙˆÙ‰ Ø§Ù„Ù…ÙˆØ­Ø¯ Ù„Ù„Ù†Ø§Ø¦Ø¨ Ø£Ø­Ù…Ø¯ Ø§Ù„Ø­Ø¯ÙŠØ¯ÙŠ</h1>
            <p class="subtitle">Ø®Ø¯Ù…Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© Ù…ØªØ·ÙˆØ±Ø© Ù„ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø´ÙƒØ§ÙˆÙ‰ ÙˆØ§Ù„Ù…Ø´ÙƒÙ„Ø§Øª ÙˆÙ…ØªØ§Ø¨Ø¹ØªÙ‡Ø§ Ø¨ÙƒÙ„ Ø³Ù‡ÙˆÙ„Ø©</p>
        </div>
    </header>

    <div class="container">
        <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
        <div class="main-container" id="mainContainer">
            <div class="welcome-text">
                <h2>âœ¨ Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨ÙƒÙ… ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„Ø´ÙƒØ§ÙˆÙ‰ Ø§Ù„Ù…ÙˆØ­Ø¯ âœ¨</h2>
                <p>Ù†Ø¸Ø§Ù… Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…ØªÙƒØ§Ù…Ù„ ÙˆØ­Ø¯ÙŠØ« Ù„ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø´ÙƒØ§ÙˆÙ‰ ÙˆØ§Ù„Ù…Ø´ÙƒÙ„Ø§Øª Ø§Ù„ØªÙŠ ØªÙˆØ§Ø¬Ù‡ÙƒÙ… ÙÙŠ Ù…Ø®ØªÙ„Ù Ø§Ù„Ù…Ø¬Ø§Ù„Ø§ØªØŒ ÙˆÙ…ØªØ§Ø¨Ø¹Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ø´ÙƒÙˆÙ‰ Ø§Ù„Ù…Ù‚Ø¯Ù…Ø© Ø­ØªÙ‰ Ø­Ù„Ù‡Ø§ Ø¨ÙƒÙ„ Ø´ÙØ§ÙÙŠØ© ÙˆØ§Ø­ØªØ±Ø§ÙÙŠØ©.</p>
            </div>

            <div class="boxes-container">
                <div class="box-wrapper">
                    <div class="action-box" id="submitBox">
                        <div class="box-content">
                            <div class="box-icon">
                                <i class="fas fa-file-alt"></i>
                            </div>
                            <h3 class="box-title">ğŸ“ ØªÙ‚Ø¯ÙŠÙ… Ø·Ù„Ø¨ Ø£Ùˆ Ø´ÙƒÙˆÙ‰</h3>
                            <p class="box-description">Ù‚Ø¯Ù… Ø´ÙƒÙˆÙ‰ Ø£Ùˆ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø£ÙŠ Ù…Ø¬Ø§Ù„ Ù…Ù† Ø§Ù„Ù…Ø¬Ø§Ù„Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ø¨Ø³Ù‡ÙˆÙ„Ø© ÙˆØ³Ø±Ø¹Ø©</p>
                            <button class="box-button">
                                <span>ØªÙ‚Ø¯ÙŠÙ… Ø´ÙƒÙˆÙ‰ Ø¬Ø¯ÙŠØ¯Ø©</span>
                                <i class="fas fa-arrow-left"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="box-wrapper">
                    <div class="action-box" id="trackBox">
                        <div class="box-content">
                            <div class="box-icon">
                                <i class="fas fa-search"></i>
                            </div>
                            <h3 class="box-title">ğŸ” Ù…ØªØ§Ø¨Ø¹Ø© Ø·Ù„Ø¨ Ø£Ùˆ Ø´ÙƒÙˆÙ‰</h3>
                            <p class="box-description">ØªØ§Ø¨Ø¹ Ø­Ø§Ù„Ø© Ø§Ù„Ø´ÙƒÙˆÙ‰ Ø§Ù„Ù…Ù‚Ø¯Ù…Ø© Ø³Ø§Ø¨Ù‚Ù‹Ø§ Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ Ø£Ùˆ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ Ø£Ùˆ Ø§Ù„Ø§Ø³Ù…</p>
                            <button class="box-button">
                                <span>Ù…ØªØ§Ø¨Ø¹Ø© Ø´ÙƒÙˆÙ‰</span>
                                <i class="fas fa-arrow-left"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <p style="text-align:center;color:white;max-width:700px;margin-top:30px;padding:0 10px;font-size:1.1rem;text-shadow:0 2px 8px rgba(0,0,0,0.2);">
                ğŸ”’ ÙŠØªÙ… Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´ÙƒØ§ÙˆÙ‰ Ø¨Ø³Ø±ÙŠØ© ØªØ§Ù…Ø© ÙˆØ¶Ù…Ù† Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…ÙŠØ© Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©
            </p>
        </div>

        <!-- Ù‚Ø³Ù… ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø´ÙƒÙˆÙ‰ -->
        <div class="hidden-section" id="submitComplaintSection">
            <button class="back-button" id="backFromSubmit">
                <i class="fas fa-arrow-right"></i>
                <span>Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
            </button>

            <div class="form-section">
                <h2>ğŸ“‹ ØªÙ‚Ø¯ÙŠÙ… Ø´ÙƒÙˆÙ‰ Ø¬Ø¯ÙŠØ¯Ø©</h2>

                <div class="form-row">
                    <div class="form-col">
                        <label for="fullName" class="required">Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ (Ø¹Ø±Ø¨ÙŠ)</label>
                        <input type="text" id="fullName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©">
                    </div>
                    <div class="form-col">
                        <label for="nationalId" class="required">Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ</label>
                        <input type="text" id="nationalId" placeholder="14 Ø±Ù‚Ù… ÙˆÙŠØ¨Ø¯Ø£ Ø¨Ù€ 2 Ø£Ùˆ 3" maxlength="14">
                        <small style="color:#666;font-size:12px;display:block;margin-top:5px;">ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 14 Ø±Ù‚Ù…Ù‹Ø§ ÙˆÙŠØ¨Ø¯Ø£ Ø¨Ù€ 2 Ø£Ùˆ 3</small>
                    </div>
                </div>

                <div class="form-group">
                    <label for="localUnit" class="required">Ø¨Ù„Ø¯ Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©</label>
                    <select id="localUnit">
                        <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ù…Ø­Ù„ÙŠØ©</option>
                        <option value="Ø§Ù„Ù…Ù†Ø²Ù„Ø©">Ø§Ù„Ù…Ù†Ø²Ù„Ø©</option>
                        <option value="Ø§Ù„Ù…Ø·Ø±ÙŠØ©">Ø§Ù„Ù…Ø·Ø±ÙŠØ©</option>
                        <option value="Ø§Ù„Ø¬Ù„Ø§Ø¯Ø©">Ø§Ù„Ø¬Ù„Ø§Ø¯Ø©</option>
                        <option value="Ø§Ù„ÙØ±ÙˆØ³Ø§Øª">Ø§Ù„ÙØ±ÙˆØ³Ø§Øª</option>
                        <option value="Ø£Ø¨Ùˆ Ø§Ù„Ø£Ø®Ø¶Ø±">Ø£Ø¨Ùˆ Ø§Ù„Ø£Ø®Ø¶Ø±</option>
                        <option value="Ø¬Ø¯ÙŠØ¯Ø© Ø§Ù„Ù…Ù†Ø²Ù„Ø©">Ø¬Ø¯ÙŠØ¯Ø© Ø§Ù„Ù…Ù†Ø²Ù„Ø©</option>
                        <option value="Ø§Ù„Ø¹Ø§Ù…Ø±Ø©">Ø§Ù„Ø¹Ø§Ù…Ø±Ø©</option>
                        <option value="Ù…ØµØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©">Ù…ØµØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</option>
                        <option value="Ø¹Ø±Ø¨ Ø²ÙŠØ¯Ø§Ù†">Ø¹Ø±Ø¨ Ø²ÙŠØ¯Ø§Ù†</option>
                        <option value="Ø§Ù„Ø³ØªØ§ÙŠØªØ©">Ø§Ù„Ø³ØªØ§ÙŠØªØ©</option>
                        <option value="ÙƒÙØ± Ø­Ø¬Ø§Ø¬">ÙƒÙØ± Ø­Ø¬Ø§Ø¬</option>
                        <option value="Ù…ÙŠØª Ø®Ø¶ÙŠØ±">Ù…ÙŠØª Ø®Ø¶ÙŠØ±</option>
                        <option value="Ø§Ù„Ù…ÙˆØ§Ø¬Ø¯">Ø§Ù„Ù…ÙˆØ§Ø¬Ø¯</option>
                        <option value="Ø§Ù„Ø¨ØµØ±Ø§Ø·">Ø§Ù„Ø¨ØµØ±Ø§Ø·</option>
                        <option value="Ù…ÙŠØª Ø´Ø±ÙŠÙ">Ù…ÙŠØª Ø´Ø±ÙŠÙ</option>
                        <option value="Ø§Ù„Ø·ÙˆØ§Ø¨Ø±Ø©">Ø§Ù„Ø·ÙˆØ§Ø¨Ø±Ø©</option>
                        <option value="Ø§Ù„Ø¹Ù…Ø§Ø±Ù†Ø©">Ø§Ù„Ø¹Ù…Ø§Ø±Ù†Ø©</option>
                        <option value="Ø§ÙˆÙ„Ø§Ø¯ Ø¨Ø§Ù†Ø§">Ø§ÙˆÙ„Ø§Ø¯ Ø¨Ø§Ù†Ø§</option>
                        <option value="Ø§ÙˆÙ„Ø§Ø¯ Ø­Ø§Ù†Ø§">Ø§ÙˆÙ„Ø§Ø¯ Ø­Ø§Ù†Ø§</option>
                        <option value="Ø¨Ø­Ø± Ø­Ø§Ø¯ÙˆØ«">Ø¨Ø­Ø± Ø­Ø§Ø¯ÙˆØ«</option>
                        <option value="Ø§Ù„Ù‚Ø²Ø§Ù‚Ø²Ø©">Ø§Ù„Ù‚Ø²Ø§Ù‚Ø²Ø©</option>
                        <option value="Ø§Ù„Ø­ÙˆØªØ©">Ø§Ù„Ø­ÙˆØªØ©</option>
                        <option value="Ø§ÙˆÙ„Ø§Ø¯ Ù†ÙˆØ±">Ø§ÙˆÙ„Ø§Ø¯ Ù†ÙˆØ±</option>
                        <option value="Ø§Ù„Ø®Ù„Ø§ÙŠÙØ©">Ø§Ù„Ø®Ù„Ø§ÙŠÙØ©</option>
                        <option value="Ø§Ù„Ù‚Ø·Ø´Ø©">Ø§Ù„Ù‚Ø·Ø´Ø©</option>
                        <option value="Ø§Ù„Ø¬Ù…Ø§Ù…Ù„Ø©">Ø§Ù„Ø¬Ù…Ø§Ù…Ù„Ø©</option>
                        <option value="Ø§Ù„Ø¹Ø²ÙŠØ²Ø©">Ø§Ù„Ø¹Ø²ÙŠØ²Ø©</option>
                        <option value="Ø§Ù„Ø£Ø­Ù…Ø¯ÙŠØ©">Ø§Ù„Ø£Ø­Ù…Ø¯ÙŠØ©</option>
                        <option value="Ø§Ù„Ø¹Ø±Ø¨Ø§Ù†">Ø§Ù„Ø¹Ø±Ø¨Ø§Ù†</option>
                        <option value="Ø§ÙˆÙ„Ø§Ø¯ Ø¹Ù„Ù…">Ø§ÙˆÙ„Ø§Ø¯ Ø¹Ù„Ù…</option>
                        <option value="Ø§ÙˆÙ„Ø§Ø¯ Ù†Ø§ØµØ±">Ø§ÙˆÙ„Ø§Ø¯ Ù†Ø§ØµØ±</option>
                        <option value="Ø¨Ù†ÙŠ Ù‡Ù„Ø§Ù„">Ø¨Ù†ÙŠ Ù‡Ù„Ø§Ù„</option>
                        <option value="Ø§Ù„Ø´Ø¨ÙˆÙ„">Ø§Ù„Ø´Ø¨ÙˆÙ„</option>
                        <option value="Ø§Ù„Ø±ÙˆØ¯Ø©">Ø§Ù„Ø±ÙˆØ¯Ø©</option>
                        <option value="Ø§Ù„Ù†Ø³Ø§ÙŠÙ…Ø©">Ø§Ù„Ù†Ø³Ø§ÙŠÙ…Ø©</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="address" class="required">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø§Ù„ØªÙØµÙŠÙ„</label>
                    <input type="text" id="address" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙØµÙŠÙ„ÙŠ">
                </div>

                <div class="form-row">
                    <div class="form-col">
                        <label for="phone1" class="required">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (1)</label>
                        <input type="tel" id="phone1" placeholder="Ù…Ø«Ø§Ù„: 01012345678" maxlength="11">
                        <small style="color:#666;font-size:12px;display:block;margin-top:5px;">ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 11 Ø±Ù‚Ù…Ù‹Ø§ ÙˆÙŠØ¨Ø¯Ø£ Ø¨Ù€ 01</small>
                    </div>
                    <div class="form-col">
                        <label for="phone2">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (2) - Ø§Ø®ØªÙŠØ§Ø±ÙŠ</label>
                        <input type="tel" id="phone2" placeholder="Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø¥Ø¶Ø§ÙÙŠ" maxlength="11">
                        <small style="color:#666;font-size:12px;display:block;margin-top:5px;">ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 11 Ø±Ù‚Ù…Ù‹Ø§ ÙˆÙŠØ¨Ø¯Ø£ Ø¨Ù€ 01 (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</small>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-col">
                        <label for="department" class="required">Ø§Ù„Ù‚Ø³Ù…</label>
                        <select id="department">
                            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…</option>
                            <option value="Ù…Ø´ÙƒÙ„Ø© Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù‚Ø¶Ø§Ø¡ ÙˆØ§Ù„Ù…Ø­Ø§ÙƒÙ…">Ù…Ø´ÙƒÙ„Ø© Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù‚Ø¶Ø§Ø¡ ÙˆØ§Ù„Ù…Ø­Ø§ÙƒÙ…</option>
                            <option value="Ù…Ø³Ø§Ø¹Ø¯Ø© Ù…Ø§Ù„ÙŠØ©">Ù…Ø³Ø§Ø¹Ø¯Ø© Ù…Ø§Ù„ÙŠØ©</option>
                            <option value="Ù…Ø´ÙƒÙ„Ø© Ø®Ø§ØµØ© Ø¨Ø§Ù„ØµØ­Ø©">Ù…Ø´ÙƒÙ„Ø© Ø®Ø§ØµØ© Ø¨Ø§Ù„ØµØ­Ø©</option>
                            <option value="Ù…Ø´ÙƒÙ„Ø§Øª Ù…ÙŠØ§Ù‡ Ø§Ù„Ø´Ø±Ø¨ ÙˆØ§Ù„ØµØ±Ù Ø§Ù„ØµØ­ÙŠ">Ù…Ø´ÙƒÙ„Ø§Øª Ù…ÙŠØ§Ù‡ Ø§Ù„Ø´Ø±Ø¨ ÙˆØ§Ù„ØµØ±Ù Ø§Ù„ØµØ­ÙŠ</option>
                            <option value="Ù…Ø´ÙƒÙ„Ø© Ø®Ø§ØµØ© Ø¨Ø§Ù„ØªØ¹Ù„ÙŠÙ…">Ù…Ø´ÙƒÙ„Ø© Ø®Ø§ØµØ© Ø¨Ø§Ù„ØªØ¹Ù„ÙŠÙ…</option>
                            <option value="Ù…Ø´ÙƒÙ„Ø© Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø´Ø±Ø·Ø© ÙˆØ§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©">Ù…Ø´ÙƒÙ„Ø© Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø´Ø±Ø·Ø© ÙˆØ§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©</option>
                            <option value="Ø­Ø§Ù„Ø© Ø·Ø§Ø±Ø¦Ø©">Ø­Ø§Ù„Ø© Ø·Ø§Ø±Ø¦Ø©</option>
                            <option value="Ù…Ø´ÙƒÙ„Ø§Øª Ø£Ø®Ø±ÙŠ">Ù…Ø´ÙƒÙ„Ø§Øª Ø£Ø®Ø±ÙŠ</option>
                        </select>
                    </div>
                    <div class="form-col">
                        <label for="priority" class="required">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©</label>
                        <select id="priority">
                            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù†ÙˆØ¹</option>
                            <option value="Ø¹Ø§Ø¯ÙŠØ©">Ø¹Ø§Ø¯ÙŠØ©</option>
                            <option value="Ù…Ù‡Ù…Ø©">Ù…Ù‡Ù…Ø©</option>
                            <option value="ÙÙ‰ ØºØ§ÙŠØ© Ø§Ù„Ø£Ù‡Ù…ÙŠØ©">ÙÙ‰ ØºØ§ÙŠØ© Ø§Ù„Ø£Ù‡Ù…ÙŠØ©</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="problemDetails" class="required">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©</label>
                    <textarea id="problemDetails" placeholder="Ø£Ø¯Ø®Ù„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© (Ø­Ø¯ Ø£Ù‚ØµÙ‰ 5000 Ø­Ø±Ù)" maxlength="5000"></textarea>
                    <div class="char-count">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø­Ø±Ù: <span id="charCount">0</span> / 5000</div>
                </div>

                <div class="documents-option">
                    <div class="documents-checkbox">
                        <input type="checkbox" id="sendDocuments" name="sendDocuments">
                        <label for="sendDocuments">ğŸ“ Ø£Ø±ÙŠØ¯ Ø¥Ø±Ø³Ø§Ù„ Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø¯Ø§Ø¹Ù…Ø© Ù„Ù„Ø´ÙƒÙˆÙ‰ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</label>
                    </div>
                    <div id="documentsInstructions" class="documents-instructions">
                        <p><strong>ğŸ“Œ ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª:</strong></p>
                        <p>1. Ø¨Ø¹Ø¯ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø´ÙƒÙˆÙ‰ØŒ Ø³ÙŠØ¸Ù‡Ø± Ù„Ùƒ Ø²Ø± Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨.</p>
                        <p>2. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± ÙˆØ³ÙŠØªÙ… ÙØªØ­ ØªØ·Ø¨ÙŠÙ‚ ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø¹ Ø±Ù‚Ù… Ø§Ù„Ù…ÙƒØªØ¨.</p>
                        <p>3. Ø£Ø±Ø³Ù„ ØµÙˆØ± Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ù…Ø¹ Ø°ÙƒØ± Ø±Ù‚Ù… Ø§Ù„Ø´ÙƒÙˆÙ‰ ÙÙŠ Ø§Ù„Ø±Ø³Ø§Ù„Ø©.</p>
                    </div>
                </div>

                <button onclick="submitComplaint()" class="btn btn-primary">
                    <span>Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø´ÙƒÙˆÙ‰</span>
                    <i class="fas fa-paper-plane"></i>
                </button>

                <div id="message" class="message" style="display:none;"></div>
            </div>
        </div>

        <!-- Ù‚Ø³Ù… Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø´ÙƒÙˆÙ‰ (Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± Ù…Ù†Ø·Ù‚ÙŠ) -->
        <div class="hidden-section" id="trackComplaintSection">
            <button class="back-button" id="backFromTrack">
                <i class="fas fa-arrow-right"></i>
                <span>Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
            </button>

            <div class="search-section">
                <h2>ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø·Ù„Ø¨</h2>

                <div class="search-options" id="searchOptions">
                    <div class="search-option active" data-search-type="number">
                        <input type="radio" id="searchTypeNumber" name="searchType" value="number" checked>
                        <label for="searchTypeNumber">Ø¨Ø­Ø« Ø¨Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</label>
                    </div>
                    <div class="search-option" data-search-type="nationalId">
                        <input type="radio" id="searchTypeNationalId" name="searchType" value="nationalId">
                        <label for="searchTypeNationalId">Ø¨Ø­Ø« Ø¨Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ</label>
                    </div>
                    <div class="search-option" data-search-type="name">
                        <input type="radio" id="searchTypeName" name="searchType" value="name">
                        <label for="searchTypeName">Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…</label>
                    </div>
                </div>

                <div class="form-group">
                    <input type="text" id="searchComplaint" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ (Ù…Ø«Ø§Ù„: JUD-00001)">
                    <button onclick="searchComplaint()" class="btn btn-search">
                        <span>Ø¨Ø­Ø«</span>
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>

            <div id="complaintDetails" class="complaint-details"></div>
        </div>

        <div class="footer">
            <p>Â© 2026 Ù†Ø¸Ø§Ù… Ø§Ù„Ø´ÙƒØ§ÙˆÙ‰ Ø§Ù„Ù…ÙˆØ­Ø¯ - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
            <p>
                <i class="fas fa-code"></i>
                ØªÙ… Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù†
                <a href="https://www.facebook.com/en.mohamed.nasr" target="_blank">
                    Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ù…Ø­Ù…Ø¯ Ù†ØµØ±
                    <i class="fab fa-facebook"></i>
                </a>
            </p>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

    <script>
        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø²ÙŠØ¦Ø§Øª
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 20;
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                const size = Math.random() * 10 + 5;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDuration = Math.random() * 10 + 15 + 's';
                particle.style.animationDelay = Math.random() * 5 + 's';
                particlesContainer.appendChild(particle);
            }
        }
        createParticles();

        // Ù…ØªØºÙŠØ±Ø§Øª Ø¹Ø§Ù…Ø©
        let currentComplaintKey = null;
        let currentComplaintData = null;
        let lastComplaintNumber = null;

        // Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyBIIStbiZD0ZJ6su7C1bwZlBvqx-PP-t58",
            authDomain: "shakawa-e0a3c.firebaseapp.com",
            databaseURL: "https://shakawa-e0a3c-default-rtdb.firebaseio.com",
            projectId: "shakawa-e0a3c",
            storageBucket: "shakawa-e0a3c.firebasestorage.app",
            messagingSenderId: "111620348664",
            appId: "1:111620348664:web:670fdf5caed46eb691b90d",
            measurementId: "G-SGNTJZDQ1L"
        };
        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // DOM
        const submitBox = document.getElementById('submitBox');
        const trackBox = document.getElementById('trackBox');
        const submitSection = document.getElementById('submitComplaintSection');
        const trackSection = document.getElementById('trackComplaintSection');
        const mainContainer = document.getElementById('mainContainer');
        const backFromSubmit = document.getElementById('backFromSubmit');
        const backFromTrack = document.getElementById('backFromTrack');
        const sendDocumentsCheckbox = document.getElementById('sendDocuments');
        const documentsInstructions = document.getElementById('documentsInstructions');
        const problemDetails = document.getElementById('problemDetails');
        const charCount = document.getElementById('charCount');
        const nationalIdInput = document.getElementById('nationalId');
        const phone1Input = document.getElementById('phone1');
        const phone2Input = document.getElementById('phone2');

        document.addEventListener('DOMContentLoaded', initApp);

        function initApp() {
            submitBox.addEventListener('click', openSubmitSection);
            trackBox.addEventListener('click', openTrackSection);
            backFromSubmit.addEventListener('click', closeAllSections);
            backFromTrack.addEventListener('click', closeAllSections);

            if (sendDocumentsCheckbox) {
                sendDocumentsCheckbox.addEventListener('change', function () {
                    if (this.checked) documentsInstructions.classList.add('show');
                    else documentsInstructions.classList.remove('show');
                });
            }

            if (problemDetails && charCount) {
                problemDetails.addEventListener('input', function () {
                    charCount.textContent = this.value.length;
                });
            }

            if (nationalIdInput) {
                nationalIdInput.addEventListener('input', function () {
                    let v = this.value.trim().replace(/\D/g, '');
                    if (v.length > 14) v = v.substring(0, 14);
                    this.value = v;
                });
            }

            [phone1Input, phone2Input].forEach(input => {
                if (input) {
                    input.addEventListener('input', function () {
                        let v = this.value.trim().replace(/\D/g, '');
                        if (v.length > 11) v = v.substring(0, 11);
                        this.value = v;
                    });
                }
            });

            document.querySelectorAll('.search-option').forEach(option => {
                option.addEventListener('click', function () {
                    document.querySelectorAll('.search-option').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    const radio = this.querySelector('input');
                    radio.checked = true;
                    updateSearchPlaceholder(radio.value);
                });
            });
        }

        function openSubmitSection() {
            mainContainer.style.display = 'none';
            submitSection.style.display = 'block';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function openTrackSection() {
            mainContainer.style.display = 'none';
            trackSection.style.display = 'block';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function closeAllSections() {
            submitSection.style.display = 'none';
            trackSection.style.display = 'none';
            mainContainer.style.display = 'block';
            resetForms();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function resetForms() {
            document.getElementById('fullName').value = '';
            document.getElementById('nationalId').value = '';
            document.getElementById('localUnit').value = '';
            document.getElementById('address').value = '';
            document.getElementById('phone1').value = '';
            document.getElementById('phone2').value = '';
            document.getElementById('department').value = '';
            document.getElementById('priority').value = '';
            document.getElementById('problemDetails').value = '';
            if (sendDocumentsCheckbox) sendDocumentsCheckbox.checked = false;
            if (documentsInstructions) documentsInstructions.classList.remove('show');
            if (charCount) charCount.textContent = '0';
            const msg = document.getElementById('message');
            if (msg) { msg.style.display = 'none'; msg.className = 'message'; msg.textContent = ''; }

            document.getElementById('searchComplaint').value = '';
            const cd = document.getElementById('complaintDetails');
            cd.style.display = 'none';
            cd.innerHTML = '';
        }

        function updateSearchPlaceholder(type) {
            const searchInput = document.getElementById('searchComplaint');
            if (type === 'number') searchInput.placeholder = 'Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ (Ù…Ø«Ø§Ù„: JUD-00001)';
            else if (type === 'nationalId') searchInput.placeholder = 'Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ (14 Ø±Ù‚Ù…Ù‹Ø§)';
            else if (type === 'name') searchInput.placeholder = 'Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„';
        }

        function showMessage(type, text) {
            const msg = document.getElementById('message');
            msg.style.display = 'block';
            msg.textContent = text;
            msg.className = 'message ' + (type === 'error' ? 'error' : 'success');
        }

        async function generateComplaintNumber(department) {
            const ref = database.ref('settings/lastComplaintNumber');
            const snap = await ref.get();
            let last = 0;
            if (snap.exists()) last = snap.val();
            last++;
            await ref.set(last);
            lastComplaintNumber = last;
            const formatted = String(last).padStart(5, '0');
            return 'JUD-' + formatted;
        }

        // Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø´ÙƒÙˆÙ‰ + ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ù„Ù…Ø³Ø¤ÙˆÙ„
        async function submitComplaint() {
            const fullName = document.getElementById('fullName').value.trim();
            const nationalId = document.getElementById('nationalId').value.trim();
            const localUnit = document.getElementById('localUnit').value;
            const address = document.getElementById('address').value.trim();
            const phone1 = document.getElementById('phone1').value.trim();
            const phone2 = document.getElementById('phone2').value.trim();
            const department = document.getElementById('department').value;
            const priority = document.getElementById('priority').value;
            const problemDetailsText = document.getElementById('problemDetails').value.trim();
            const sendDocs = document.getElementById('sendDocuments').checked;

            if (!fullName || !nationalId || !localUnit || !address || !phone1 || !department || !priority || !problemDetailsText) {
                showMessage('error', 'ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©.');
                return;
            }

            if (nationalId.length !== 14 || (nationalId[0] !== '2' && nationalId[0] !== '3')) {
                showMessage('error', 'Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 14 Ø±Ù‚Ù…Ù‹Ø§ ÙˆÙŠØ¨Ø¯Ø£ Ø¨Ù€ 2 Ø£Ùˆ 3.');
                return;
            }

            if (phone1.length !== 11 || !phone1.startsWith('01')) {
                showMessage('error', 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ø£ÙˆÙ„ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 11 Ø±Ù‚Ù…Ù‹Ø§ ÙˆÙŠØ¨Ø¯Ø£ Ø¨Ù€ 01.');
                return;
            }

            if (phone2 && (phone2.length !== 11 || !phone2.startsWith('01'))) {
                showMessage('error', 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø¥Ù† ÙˆØ¬Ø¯ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 11 Ø±Ù‚Ù…Ù‹Ø§ ÙˆÙŠØ¨Ø¯Ø£ Ø¨Ù€ 01.');
                return;
            }

            try {
                const complaintRef = database.ref('complaints').push();
                const complaintKey = complaintRef.key;
                const timestamp = new Date().toISOString();
                const complaintNumber = await generateComplaintNumber(department);

                const complaintData = {
                    complaintNumber,
                    fullName,
                    nationalId,
                    localUnit,
                    address,
                    phone1,
                    phone2: phone2 || '',
                    department,
                    priority,
                    problemDetails: problemDetailsText,
                    sendDocuments: sendDocs,
                    status: 'Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©',
                    clientResponses: [],
                    adminResponses: [],
                    createdAt: timestamp,
                    updatedAt: timestamp
                };

                await complaintRef.set(complaintData);

                currentComplaintKey = complaintKey;
                currentComplaintData = complaintData;

                showMessage('success', 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø´ÙƒÙˆÙ‰ Ø¨Ù†Ø¬Ø§Ø­. Ø±Ù‚Ù… Ø§Ù„Ø´ÙƒÙˆÙ‰ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ù‡Ùˆ: ' + complaintNumber);

                // ===== Ù‡Ù†Ø§ ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ù‚Ø³Ù… =====
                try {
                    const usersSnap = await database.ref('users').get();
                    let managerPhone = null;
                    if (usersSnap.exists()) {
                        usersSnap.forEach(ch => {
                            const u = ch.val();
                            if (u.departments && u.departments[department] && u.phone && !managerPhone) {
                                managerPhone = u.phone.replace('+', '');
                            }
                        });
                    }

                    if (managerPhone) {
                        const msgText =
                            `ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø´ÙƒÙˆÙ‰ Ø¬Ø¯ÙŠØ¯Ø© Ø±Ù‚Ù… ${complaintNumber} ÙÙŠ Ù‚Ø³Ù… (${department}).%0A` +
                            `Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ§Ø·Ù†: ${fullName}.%0A` +
                            `ØªÙ„ÙŠÙÙˆÙ†: ${phone1}.%0A` +
                            `Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©: ${priority}.%0A` +
                            `ØªÙØ§ØµÙŠÙ„ Ù…Ø®ØªØµØ±Ø©: ${encodeURIComponent(problemDetailsText.substring(0, 120))}...`;
                        const waUrl = `https://wa.me/${managerPhone}?text=${msgText}`;
                        window.open(waUrl, '_blank');
                    }
                } catch (e) {
                    console.error('WhatsApp manager error', e);
                }

                // Ù„Ùˆ Ø§Ù„Ù…ÙˆØ§Ø·Ù† Ù…Ø®ØªØ§Ø± Ø¥Ø±Ø³Ø§Ù„ Ù…Ø³ØªÙ†Ø¯Ø§Øª Ù†ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ù…ÙƒØªØ¨ Ø§Ù„Ø¹Ø§Ù… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
                if (sendDocs) {
                    const officePhone = '201234567890'; // Ø¹Ø¯Ù‘Ù„ Ø±Ù‚Ù… Ù…ÙƒØªØ¨ Ø§Ù„Ù†Ø§Ø¦Ø¨ Ù‡Ù†Ø§ Ø¨ØµÙŠØºØ© Ø¯ÙˆÙ„ÙŠØ© Ø¨Ø¯ÙˆÙ† +
                    const docMsg =
                        `Ø£Ø±ØºØ¨ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ù…Ø³ØªÙ†Ø¯Ø§Øª ØªØ®Øµ Ø§Ù„Ø´ÙƒÙˆÙ‰ Ø±Ù‚Ù… ${complaintNumber}.%0A` +
                        `Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ§Ø·Ù†: ${fullName}.`;
                    const officeUrl = `https://wa.me/${officePhone}?text=${docMsg}`;
                    window.open(officeUrl, '_blank');
                }
            } catch (error) {
                console.error(error);
                showMessage('error', 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø´ÙƒÙˆÙ‰. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ø§Ø­Ù‚Ù‹Ø§.');
            }
        }

        // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø´ÙƒÙˆÙ‰ (Ù†ÙØ³ Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ù‚Ø¯ÙŠÙ…)
        async function searchComplaint() {
            const input = document.getElementById('searchComplaint').value.trim();
            const activeOption = document.querySelector('.search-option.active input');
            const type = activeOption ? activeOption.value : 'number';
            const container = document.getElementById('complaintDetails');

            if (!input) {
                container.style.display = 'none';
                container.innerHTML = '';
                alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø­Ø« Ø£ÙˆÙ„Ù‹Ø§.');
                return;
            }

            try {
                let queryRef = database.ref('complaints');
                if (type === 'number') queryRef = queryRef.orderByChild('complaintNumber').equalTo(input);
                else if (type === 'nationalId') queryRef = queryRef.orderByChild('nationalId').equalTo(input);
                else if (type === 'name') queryRef = queryRef.orderByChild('fullName').equalTo(input);

                const snapshot = await queryRef.get();
                if (!snapshot.exists()) {
                    container.style.display = 'block';
                    container.innerHTML = '<p style="font-weight:700;color:#dc3545;">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£ÙŠ Ø´ÙƒÙˆÙ‰ Ù…Ø·Ø§Ø¨Ù‚Ø©.</p>';
                    return;
                }

                let complaint = null;
                snapshot.forEach(ch => {
                    complaint = { ...ch.val(), key: ch.key };
                });

                currentComplaintKey = complaint.key;
                currentComplaintData = complaint;

                renderComplaintDetails(complaint);
            } catch (error) {
                console.error(error);
                container.style.display = 'block';
                container.innerHTML = '<p style="font-weight:700;color:#dc3545;">Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø´ÙƒÙˆÙ‰.</p>';
            }
        }

        function renderComplaintDetails(complaint) {
            const container = document.getElementById('complaintDetails');
            if (!complaint) {
                container.style.display = 'none';
                container.innerHTML = '';
                return;
            }

            const createdAt = complaint.createdAt ? new Date(complaint.createdAt).toLocaleString('ar-EG') : 'ØºÙŠØ± Ù…ØªÙˆÙØ±';
            const updatedAt = complaint.updatedAt ? new Date(complaint.updatedAt).toLocaleString('ar-EG') : 'ØºÙŠØ± Ù…ØªÙˆÙØ±';

            container.style.display = 'block';
            container.innerHTML = `
                <h3 style="margin-bottom:20px;font-weight:800;color:var(--primary-color);">
                    ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø´ÙƒÙˆÙ‰ Ø±Ù‚Ù…: ${complaint.complaintNumber || ''}
                </h3>
                <div class="details-grid">
                    <div class="detail-item">
                        <div class="detail-label">Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</div>
                        <div>${complaint.fullName || ''}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ</div>
                        <div>${complaint.nationalId || ''}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Ø¨Ù„Ø¯ Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©</div>
                        <div>${complaint.localUnit || ''}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</div>
                        <div>${complaint.address || ''}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (1)</div>
                        <div>${complaint.phone1 || ''}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (2)</div>
                        <div>${complaint.phone2 || '-'}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Ø§Ù„Ù‚Ø³Ù…</div>
                        <div>${complaint.department || ''}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©</div>
                        <div>${complaint.priority || ''}</div>
                    </div>
                    <div class="detail-item" style="grid-column:1/-1;">
                        <div class="detail-label">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©</div>
                        <div>${complaint.problemDetails || ''}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Ø­Ø§Ù„Ø© Ø§Ù„Ø´ÙƒÙˆÙ‰</div>
                        <div>${complaint.status || ''}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</div>
                        <div>${createdAt}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«</div>
                        <div>${updatedAt}</div>
                    </div>
                </div>
            `;
        }
    </script>
</body>
</html>
